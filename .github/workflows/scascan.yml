on:
  workflow_dispatch:
#  push:
#    branches: [feature-123]
#  pull_request:
#    branches: [main]



jobs:
  veracode-sca-task1:
    runs-on: ubuntu-latest
    name: Scan remote repository for Issues

    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Run Veracode SCA
        env:
            SRCCLR_API_TOKEN: ${{ secrets.SRCCLR_API_TOKEN }}
        uses: veracode/veracode-sca@artifactname
        with:
          no-upload: false
          create-issues: true
          debug: true
          artifactname: scan1

  veracode-sca-task2:
    runs-on: ubuntu-latest
    name: Scan remote repository for Issues 2

    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Run Veracode SCA
        env:
            SRCCLR_API_TOKEN: ${{ secrets.SRCCLR_API_TOKEN }}
        uses: veracode/veracode-sca@artifactname
        with:
          no-upload: false
          create-issues: true
          debug: true
          artifactname: scan2

  veracode-sca-task3:
    runs-on: ubuntu-latest
    name: Scan remote repository for Issues 3

    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Run Veracode SCA
        env:
            SRCCLR_API_TOKEN: ${{ secrets.SRCCLR_API_TOKEN }}
        uses: veracode/veracode-sca@artifactname
        with:
          no-upload: false
          create-issues: true
          debug: true
          artifactname: scan3
